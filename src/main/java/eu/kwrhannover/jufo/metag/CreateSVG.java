package eu.kwrhannover.jufo.metag;

import cern.colt.list.DoubleArrayList;

import java.io.BufferedWriter;
import java.io.IOException;
import java.nio.file.Files;
import java.nio.file.Path;
import java.time.LocalDate;
import java.util.List;

import static java.nio.charset.StandardCharsets.UTF_8;
import static java.util.Arrays.asList;
import static eu.kwrhannover.jufo.metag.MetaG.*;
import static eu.kwrhannover.jufo.metag.Result.DiagnosticFinding.*;

public class CreateSVG {
    private static final List<String> subtitlesLeft = asList("0", "20", "40", "60", "80", "100");

    private static final double graphHeight = 700.0;

    public static Path createTargetFilename(final Path path) {
        String fileEnding = "_analysis_" + maxPositions + "_res" + barCount;
        if (scale == 1) {
            fileEnding += ".svg";
        } else {
            fileEnding += "_scaled" + scale + "x.svg";
        }
        return path.getParent().resolve(cutFileExtension(path.getFileName()) + fileEnding);
    }

    public static void writeSVG(final DoubleArrayList scaledBars, final Path path, final Path targetFile, final Result result) throws IOException {
        for (int i = 0; i != 6; ++i) {
            subtitlesLeft.set(i, String.valueOf(i * 20 / scale));
        }

        double barWidth = 1500.0 / barCount;

        try (BufferedWriter svgWriter = Files.newBufferedWriter(targetFile, UTF_8)) {
            //graph version: MetaG_Graph4.2
            svgWriter.write("""
                    <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="1920" height="900" viewBox="0 0 1920 900">
                        <defs>
                            <linearGradient id="linear-gradient" x1="0.5" x2="0.5" y2="1" gradientUnits="objectBoundingBox">
                                <stop offset="0" stop-color="#fff"/>
                                <stop offset="1" stop-color="#fff" stop-opacity="0"/>
                            </linearGradient>
                            <filter id="Pfad_9" x="58" y="749" width="90" height="90" filterUnits="userSpaceOnUse">
                                <feOffset dy="3" input="SourceAlpha"/>
                                <feGaussianBlur stdDeviation="3" result="blur"/>
                                <feFlood flood-opacity="0.161"/>
                                <feComposite operator="in" in2="blur"/>
                                <feComposite in="SourceGraphic"/>
                            </filter>
                            <filter id="Pfad_4" x="58" y="749" width="90" height="77.632" filterUnits="userSpaceOnUse">
                                <feOffset dy="3" input="SourceAlpha"/>
                                <feGaussianBlur stdDeviation="3" result="blur-2"/>
                                <feFlood flood-opacity="0.161"/>
                                <feComposite operator="in" in2="blur-2"/>
                                <feComposite in="SourceGraphic"/>
                            </filter>
                            <filter id="Pfad_2" x="58" y="749" width="90" height="68.262" filterUnits="userSpaceOnUse">
                                <feOffset dy="3" input="SourceAlpha"/>
                                <feGaussianBlur stdDeviation="3" result="blur-3"/>
                                <feFlood flood-opacity="0.161"/>
                                <feComposite operator="in" in2="blur-3"/>
                                <feComposite in="SourceGraphic"/>
                            </filter>
                            <filter id="Pfad_3" x="58" y="749" width="90" height="73.821" filterUnits="userSpaceOnUse">
                                <feOffset dy="3" input="SourceAlpha"/>
                                <feGaussianBlur stdDeviation="3" result="blur-4"/>
                                <feFlood flood-opacity="0.161"/>
                                <feComposite operator="in" in2="blur-4"/>
                                <feComposite in="SourceGraphic"/>
                            </filter>
                            <filter id="Pfad_5" x="58" y="749" width="90" height="45.191" filterUnits="userSpaceOnUse">
                                <feOffset dy="3" input="SourceAlpha"/>
                                <feGaussianBlur stdDeviation="3" result="blur-5"/>
                                <feFlood flood-opacity="0.161"/>
                                <feComposite operator="in" in2="blur-5"/>
                                <feComposite in="SourceGraphic"/>
                            </filter>
                            <clipPath id="clip-MetaG_Graph4.0">
                                <rect width="1920" height="900"/>
                            </clipPath>
                        </defs>
                        <g id="MetaG_Graph4.0" clip-path="url(#clip-MetaG_Graph4.0)">
                            <rect width="1920" height="900" fill="#fff"/>
                            <g id="border" fill="none" stroke="#000" stroke-width="5">
                                <rect width="1920" height="900" stroke="none"/>
                                <rect x="2.5" y="2.5" width="1915" height="895" fill="none"/>
                            </g>
                            <g id="graph" transform="translate(206 -100)">
                                <g id="Achsen">
                                    <line id="Linie_1" data-name="Linie 1" y2="705" transform="translate(131 188)" fill="none" stroke="#000" stroke-linecap="square" stroke-width="10"/>
                                    <line id="Linie_2" data-name="Linie 2" x2="1505" transform="translate(131 893)" fill="none" stroke="#000" stroke-linecap="square" stroke-width="10"/>
                                </g>
                                <g id="subtitle_bottom" transform="translate(122 893)">
                                    <path id="PositionsabstÃ¤nde" d="M9.585,14.252a3,3,0,0,1-.378,1.47,2.673,2.673,0,0,1-1.162,1.106,4.184,4.184,0,0,1-1.988.42H4.419V21H2.459V11.228h3.6a4.348,4.348,0,0,1,1.932.392A2.687,2.687,0,0,1,9.179,12.7,2.993,2.993,0,0,1,9.585,14.252ZM5.973,15.666a1.72,1.72,0,0,0,1.2-.364,1.39,1.39,0,0,0,.392-1.05q0-1.428-1.6-1.428H4.419v2.842Zm8.448,5.46a4.132,4.132,0,0,1-2.016-.49,3.676,3.676,0,0,1-1.414-1.414,4.263,4.263,0,0,1-.5-2.1,4.171,4.171,0,0,1,.518-2.1,3.648,3.648,0,0,1,1.442-1.4,4.34,4.34,0,0,1,4.06,0,3.553,3.553,0,0,1,1.428,1.4,4.084,4.084,0,0,1,.532,2.1,4,4,0,0,1-.546,2.1,3.719,3.719,0,0,1-1.456,1.414A4.241,4.241,0,0,1,14.421,21.126Zm0-1.708a2.043,2.043,0,0,0,.994-.252,1.915,1.915,0,0,0,.756-.784,2.618,2.618,0,0,0,.28-1.26,2.293,2.293,0,0,0-.588-1.694,1.962,1.962,0,0,0-2.828,0,2.363,2.363,0,0,0-.56,1.694,2.454,2.454,0,0,0,.546,1.708A1.853,1.853,0,0,0,14.421,19.418Zm8.452,1.708a4.163,4.163,0,0,1-1.708-.336,3.132,3.132,0,0,1-1.2-.938,2.386,2.386,0,0,1-.476-1.3h1.974a1.083,1.083,0,0,0,.434.742,1.564,1.564,0,0,0,.966.294,1.456,1.456,0,0,0,.868-.224.675.675,0,0,0,.322-.574.592.592,0,0,0-.392-.56,6.5,6.5,0,0,0-1.218-.42,10.73,10.73,0,0,1-1.428-.434,2.537,2.537,0,0,1-.952-.686,1.862,1.862,0,0,1-.392-1.246,2.037,2.037,0,0,1,.364-1.176,2.547,2.547,0,0,1,1.064-.84,4.039,4.039,0,0,1,1.638-.308,3.308,3.308,0,0,1,2.212.7,2.544,2.544,0,0,1,.91,1.862H23.979a.984.984,0,0,0-.392-.728,1.377,1.377,0,0,0-.91-.28,1.48,1.48,0,0,0-.826.2.629.629,0,0,0-.28.546.656.656,0,0,0,.392.6,6.486,6.486,0,0,0,1.218.406,10.343,10.343,0,0,1,1.386.434,2.366,2.366,0,0,1,.938.7,1.854,1.854,0,0,1,.42,1.232,2.028,2.028,0,0,1-.378,1.2,2.436,2.436,0,0,1-1.064.84A4.064,4.064,0,0,1,22.872,21.126Zm5.655-8.806A1.233,1.233,0,0,1,27.659,12a1.123,1.123,0,0,1-.336-.826,1.077,1.077,0,0,1,.336-.812,1.2,1.2,0,0,1,.868-.336,1.157,1.157,0,0,1,.854.336,1.056,1.056,0,0,1,.35.812,1.1,1.1,0,0,1-.35.826A1.184,1.184,0,0,1,28.527,12.32Zm.966.924V21h-1.96V13.244Zm4.218,1.61v3.752a.784.784,0,0,0,.182.574.986.986,0,0,0,.644.168h.91V21H34.216a2.16,2.16,0,0,1-2.478-2.408V14.854h-.924v-1.61h.924V11.326h1.974v1.918h1.736v1.61Zm4.14-2.534A1.234,1.234,0,0,1,36.984,12a1.123,1.123,0,0,1-.336-.826,1.077,1.077,0,0,1,.336-.812,1.2,1.2,0,0,1,.868-.336,1.157,1.157,0,0,1,.854.336,1.056,1.056,0,0,1,.35.812,1.1,1.1,0,0,1-.35.826A1.184,1.184,0,0,1,37.852,12.32Zm.966.924V21h-1.96V13.244ZM44.2,21.126a4.131,4.131,0,0,1-2.016-.49,3.676,3.676,0,0,1-1.414-1.414,4.263,4.263,0,0,1-.5-2.1,4.171,4.171,0,0,1,.518-2.1,3.647,3.647,0,0,1,1.442-1.4,4.34,4.34,0,0,1,4.06,0,3.553,3.553,0,0,1,1.428,1.4,4.084,4.084,0,0,1,.532,2.1,4,4,0,0,1-.546,2.1,3.72,3.72,0,0,1-1.456,1.414A4.241,4.241,0,0,1,44.2,21.126Zm0-1.708a2.043,2.043,0,0,0,.994-.252,1.916,1.916,0,0,0,.756-.784,2.618,2.618,0,0,0,.28-1.26,2.293,2.293,0,0,0-.588-1.694,1.962,1.962,0,0,0-2.828,0,2.363,2.363,0,0,0-.56,1.694A2.454,2.454,0,0,0,42.8,18.83,1.853,1.853,0,0,0,44.2,19.418Zm9.782-6.286a2.977,2.977,0,0,1,2.24.882,3.325,3.325,0,0,1,.854,2.436V21h-1.96V16.716a1.985,1.985,0,0,0-.462-1.414,1.625,1.625,0,0,0-1.26-.5,1.687,1.687,0,0,0-1.288.5,1.985,1.985,0,0,0-.462,1.414V21h-1.96V13.244h1.96v.966a2.658,2.658,0,0,1,.994-.784A3.08,3.08,0,0,1,53.98,13.132Zm7.926,7.994A4.163,4.163,0,0,1,60.2,20.79a3.133,3.133,0,0,1-1.2-.938,2.386,2.386,0,0,1-.476-1.3h1.974a1.083,1.083,0,0,0,.434.742,1.564,1.564,0,0,0,.966.294,1.456,1.456,0,0,0,.868-.224.675.675,0,0,0,.322-.574.592.592,0,0,0-.392-.56,6.5,6.5,0,0,0-1.218-.42,10.73,10.73,0,0,1-1.428-.434,2.537,2.537,0,0,1-.952-.686,1.862,1.862,0,0,1-.392-1.246,2.037,2.037,0,0,1,.364-1.176,2.547,2.547,0,0,1,1.064-.84,4.039,4.039,0,0,1,1.638-.308,3.308,3.308,0,0,1,2.212.7,2.544,2.544,0,0,1,.91,1.862H63.012a.984.984,0,0,0-.392-.728,1.377,1.377,0,0,0-.91-.28,1.48,1.48,0,0,0-.826.2.629.629,0,0,0-.28.546.656.656,0,0,0,.392.6,6.486,6.486,0,0,0,1.218.406,10.343,10.343,0,0,1,1.386.434,2.366,2.366,0,0,1,.938.7,1.854,1.854,0,0,1,.42,1.232,2.028,2.028,0,0,1-.378,1.2,2.436,2.436,0,0,1-1.064.84A4.064,4.064,0,0,1,61.906,21.126Zm4.157-4.032a4.545,4.545,0,0,1,.462-2.086,3.5,3.5,0,0,1,1.274-1.4,3.428,3.428,0,0,1,1.806-.49,3.119,3.119,0,0,1,1.512.35,3.063,3.063,0,0,1,1.05.882V13.244h1.974V21H72.167V19.866a2.962,2.962,0,0,1-1.05.91,3.2,3.2,0,0,1-1.526.35,3.331,3.331,0,0,1-1.792-.5,3.606,3.606,0,0,1-1.274-1.414A4.665,4.665,0,0,1,66.063,17.094Zm6.1.028a2.473,2.473,0,0,0-.28-1.218,1.916,1.916,0,0,0-.756-.784,2.024,2.024,0,0,0-2.03-.014,2.04,2.04,0,0,0-.756.784,2.442,2.442,0,0,0-.28,1.2,2.607,2.607,0,0,0,.28,1.232,2.15,2.15,0,0,0,.756.8,1.957,1.957,0,0,0,1.008.28,2.062,2.062,0,0,0,1.022-.266,2.037,2.037,0,0,0,.756-.784A2.555,2.555,0,0,0,72.167,17.122Zm5.848-2.744a2.816,2.816,0,0,1,1.036-.91,3.255,3.255,0,0,1,1.526-.35,3.36,3.36,0,0,1,3.066,1.89,4.382,4.382,0,0,1,.476,2.086,4.551,4.551,0,0,1-.476,2.114,3.471,3.471,0,0,1-1.274,1.414,3.524,3.524,0,0,1-3.318.168,3.032,3.032,0,0,1-1.036-.9V21h-1.96V10.64h1.96Zm4.1,2.716a2.349,2.349,0,0,0-.294-1.2,1.916,1.916,0,0,0-.756-.784,1.985,1.985,0,0,0-1.008-.266,1.957,1.957,0,0,0-1.008.28,2.04,2.04,0,0,0-.756.784,2.789,2.789,0,0,0,0,2.436,2.15,2.15,0,0,0,.756.8,2.036,2.036,0,0,0,1.008.266,1.909,1.909,0,0,0,1.008-.28,2.013,2.013,0,0,0,.756-.8A2.456,2.456,0,0,0,82.117,17.094Zm6.394,4.032A4.163,4.163,0,0,1,86.8,20.79a3.133,3.133,0,0,1-1.2-.938,2.387,2.387,0,0,1-.476-1.3H87.1a1.083,1.083,0,0,0,.434.742,1.564,1.564,0,0,0,.966.294,1.456,1.456,0,0,0,.868-.224.674.674,0,0,0,.322-.574.592.592,0,0,0-.392-.56,6.5,6.5,0,0,0-1.218-.42,10.739,10.739,0,0,1-1.428-.434,2.538,2.538,0,0,1-.952-.686,1.863,1.863,0,0,1-.392-1.246,2.038,2.038,0,0,1,.364-1.176,2.548,2.548,0,0,1,1.064-.84,4.04,4.04,0,0,1,1.638-.308,3.308,3.308,0,0,1,2.212.7,2.544,2.544,0,0,1,.91,1.862H89.617a.984.984,0,0,0-.392-.728,1.377,1.377,0,0,0-.91-.28,1.481,1.481,0,0,0-.826.2.63.63,0,0,0-.28.546.656.656,0,0,0,.392.6,6.492,6.492,0,0,0,1.218.406,10.343,10.343,0,0,1,1.386.434,2.365,2.365,0,0,1,.938.7,1.852,1.852,0,0,1,.42,1.232,2.028,2.028,0,0,1-.378,1.2,2.435,2.435,0,0,1-1.064.84A4.064,4.064,0,0,1,88.511,21.126Zm6.943-6.272v3.752a.784.784,0,0,0,.182.574.986.986,0,0,0,.644.168h.91V21H95.958a2.16,2.16,0,0,1-2.478-2.408V14.854h-.924v-1.61h.924V11.326h1.974v1.918H97.19v1.61Zm2.642,2.24a4.545,4.545,0,0,1,.462-2.086,3.5,3.5,0,0,1,1.274-1.4,3.427,3.427,0,0,1,1.806-.49,3.123,3.123,0,0,1,1.512.35,3.076,3.076,0,0,1,1.05.882V13.244h1.974V21H104.2V19.866a2.962,2.962,0,0,1-1.05.91,3.2,3.2,0,0,1-1.526.35,3.33,3.33,0,0,1-1.792-.5,3.606,3.606,0,0,1-1.274-1.414A4.665,4.665,0,0,1,98.1,17.094Zm6.1.028a2.481,2.481,0,0,0-.28-1.218,1.92,1.92,0,0,0-.756-.784,2.024,2.024,0,0,0-2.03-.014,2.04,2.04,0,0,0-.756.784,2.439,2.439,0,0,0-.28,1.2,2.6,2.6,0,0,0,.28,1.232,2.15,2.15,0,0,0,.756.8,1.955,1.955,0,0,0,1.008.28,2.064,2.064,0,0,0,1.022-.266,2.042,2.042,0,0,0,.756-.784A2.563,2.563,0,0,0,104.2,17.122Zm-3.094-4.8a.931.931,0,0,1-.658-1.582.931.931,0,1,1,1.316,1.316A.9.9,0,0,1,101.106,12.32Zm2.59,0a.931.931,0,0,1-.658-1.582.931.931,0,1,1,1.316,1.316A.9.9,0,0,1,103.7,12.32Zm8.69.812a2.976,2.976,0,0,1,2.24.882,3.327,3.327,0,0,1,.854,2.436V21h-1.96V16.716a1.985,1.985,0,0,0-.462-1.414,1.625,1.625,0,0,0-1.26-.5,1.687,1.687,0,0,0-1.288.5,1.985,1.985,0,0,0-.462,1.414V21h-1.96V13.244h1.96v.966a2.658,2.658,0,0,1,.994-.784A3.082,3.082,0,0,1,112.386,13.132Zm4.454,3.962a4.545,4.545,0,0,1,.462-2.086,3.469,3.469,0,0,1,1.288-1.4,3.426,3.426,0,0,1,1.806-.49,3.236,3.236,0,0,1,1.442.336,2.83,2.83,0,0,1,1.092.868V10.64h1.988V21H122.93V19.852a2.656,2.656,0,0,1-1.022.924,3.2,3.2,0,0,1-1.526.35,3.331,3.331,0,0,1-1.792-.5,3.569,3.569,0,0,1-1.288-1.414A4.665,4.665,0,0,1,116.84,17.094Zm6.1.028a2.47,2.47,0,0,0-.28-1.218,1.92,1.92,0,0,0-.756-.784,2.024,2.024,0,0,0-2.03-.014,2.04,2.04,0,0,0-.756.784,2.439,2.439,0,0,0-.28,1.2,2.6,2.6,0,0,0,.28,1.232,2.15,2.15,0,0,0,.756.8,1.955,1.955,0,0,0,1.008.28,1.979,1.979,0,0,0,1.778-1.05A2.551,2.551,0,0,0,122.944,17.122Zm11.1-.168a4.552,4.552,0,0,1-.056.756h-5.67a1.931,1.931,0,0,0,.588,1.316,1.814,1.814,0,0,0,1.274.476,1.6,1.6,0,0,0,1.554-.938h2.114a3.567,3.567,0,0,1-1.288,1.848,3.784,3.784,0,0,1-2.338.714,4.135,4.135,0,0,1-2.016-.49,3.606,3.606,0,0,1-1.386-1.414,4.369,4.369,0,0,1-.49-2.1,4.4,4.4,0,0,1,.49-2.114,3.421,3.421,0,0,1,1.372-1.4,4.111,4.111,0,0,1,2.03-.49,4.034,4.034,0,0,1,1.974.476,3.282,3.282,0,0,1,1.358,1.358A4,4,0,0,1,134.042,16.954Zm-2.03-.56a1.531,1.531,0,0,0-.546-1.2,1.914,1.914,0,0,0-1.3-.462,1.789,1.789,0,0,0-1.232.448,1.93,1.93,0,0,0-.6,1.218Z" transform="translate(1393.958 40.976)"/>
                                    <text id="_0.0" data-name="0.0" transform="translate(0 30)" font-size="20" font-family="SegoeUI-Bold, Segoe UI" font-weight="700"><tspan x="0" y="0">0.0</tspan></text>
                                    <line id="line" y2="10" transform="translate(14)" fill="none" stroke="#000" stroke-width="10"/>
                                    <text id="_0.1" data-name="0.1" transform="translate(300 30)" font-size="20" font-family="SegoeUI-Bold, Segoe UI" font-weight="700"><tspan x="0" y="0">0.1</tspan></text>
                                    <line id="line-2" data-name="line" y2="10" transform="translate(314)" fill="none" stroke="#000" stroke-width="10"/>
                                    <text id="_0.2" data-name="0.2" transform="translate(600 30)" font-size="20" font-family="SegoeUI-Bold, Segoe UI" font-weight="700"><tspan x="0" y="0">0.2</tspan></text>
                                    <line id="line-3" data-name="line" y2="10" transform="translate(614)" fill="none" stroke="#000" stroke-width="10"/>
                                    <text id="_0.3" data-name="0.3" transform="translate(900 30)" font-size="20" font-family="SegoeUI-Bold, Segoe UI" font-weight="700"><tspan x="0" y="0">0.3</tspan></text>
                                    <line id="line-4" data-name="line" y2="10" transform="translate(914)" fill="none" stroke="#000" stroke-width="10"/>
                                    <text id="_0.4" data-name="0.4" transform="translate(1200 30)" font-size="20" font-family="SegoeUI-Bold, Segoe UI" font-weight="700"><tspan x="0" y="0">0.4</tspan></text>
                                    <line id="line-5" data-name="line" y2="10" transform="translate(1214)" fill="none" stroke="#000" stroke-width="10"/>
                                    <text id="_0.5" data-name="0.5" transform="translate(1500 30)" font-size="20" font-family="SegoeUI-Bold, Segoe UI" font-weight="700"><tspan x="0" y="0">0.5</tspan></text>
                                    <line id="line-6" data-name="line" y2="10" transform="translate(1514)" fill="none" stroke="#000" stroke-width="10"/>
                                </g>""");
            svgWriter.write("            <g id='subtitle_left' transform='translate(116 188)'>\n");
            svgWriter.write("                <path id='Vorkommen' d='M33.8,11.228,30.22,21H27.84l-3.584-9.772h2.1L29.044,19l2.674-7.77Zm4.619,9.9a4.131,4.131,0,0,1-2.016-.49,3.676,3.676,0,0,1-1.414-1.414,4.263,4.263,0,0,1-.5-2.1,4.171,4.171,0,0,1,.518-2.1,3.647,3.647,0,0,1,1.442-1.4,4.34,4.34,0,0,1,4.06,0,3.553,3.553,0,0,1,1.428,1.4,4.084,4.084,0,0,1,.532,2.1,4,4,0,0,1-.546,2.1,3.72,3.72,0,0,1-1.456,1.414A4.241,4.241,0,0,1,38.423,21.126Zm0-1.708a2.043,2.043,0,0,0,.994-.252,1.916,1.916,0,0,0,.756-.784,2.618,2.618,0,0,0,.28-1.26,2.293,2.293,0,0,0-.588-1.694,1.962,1.962,0,0,0-2.828,0,2.363,2.363,0,0,0-.56,1.694,2.454,2.454,0,0,0,.546,1.708A1.853,1.853,0,0,0,38.423,19.418Zm7.444-4.97a2.675,2.675,0,0,1,2.38-1.316V15.19h-.518a2.013,2.013,0,0,0-1.4.434,2.02,2.02,0,0,0-.462,1.512V21h-1.96V13.244h1.96ZM54.159,21l-2.632-3.3V21h-1.96V10.64h1.96v5.894l2.6-3.29h2.548l-3.416,3.892L56.707,21Zm7.028.126a4.131,4.131,0,0,1-2.016-.49,3.675,3.675,0,0,1-1.414-1.414,4.263,4.263,0,0,1-.5-2.1,4.17,4.17,0,0,1,.518-2.1,3.647,3.647,0,0,1,1.442-1.4,4.34,4.34,0,0,1,4.06,0,3.554,3.554,0,0,1,1.428,1.4,4.085,4.085,0,0,1,.532,2.1,4,4,0,0,1-.546,2.1,3.72,3.72,0,0,1-1.456,1.414A4.241,4.241,0,0,1,61.186,21.126Zm0-1.708a2.044,2.044,0,0,0,.994-.252,1.916,1.916,0,0,0,.756-.784,2.619,2.619,0,0,0,.28-1.26,2.293,2.293,0,0,0-.588-1.694,1.962,1.962,0,0,0-2.828,0,2.362,2.362,0,0,0-.56,1.694,2.454,2.454,0,0,0,.546,1.708A1.853,1.853,0,0,0,61.186,19.418ZM76.3,13.132a3.077,3.077,0,0,1,2.3.882,3.263,3.263,0,0,1,.882,2.436V21H77.52V16.716a1.912,1.912,0,0,0-.462-1.386,1.648,1.648,0,0,0-1.26-.49,1.694,1.694,0,0,0-1.274.49,1.912,1.912,0,0,0-.462,1.386V21H72.1V16.716a1.912,1.912,0,0,0-.462-1.386,1.648,1.648,0,0,0-1.26-.49,1.713,1.713,0,0,0-1.288.49,1.912,1.912,0,0,0-.462,1.386V21H66.67V13.244h1.96v.938a2.622,2.622,0,0,1,.966-.77,3.081,3.081,0,0,1,1.316-.28,3.319,3.319,0,0,1,1.624.392,2.654,2.654,0,0,1,1.106,1.092,2.82,2.82,0,0,1,1.092-1.078A3.167,3.167,0,0,1,76.3,13.132Zm14.67,0a3.077,3.077,0,0,1,2.3.882,3.263,3.263,0,0,1,.882,2.436V21H92.19V16.716a1.912,1.912,0,0,0-.462-1.386,1.648,1.648,0,0,0-1.26-.49,1.694,1.694,0,0,0-1.274.49,1.912,1.912,0,0,0-.462,1.386V21h-1.96V16.716a1.912,1.912,0,0,0-.462-1.386,1.648,1.648,0,0,0-1.26-.49,1.713,1.713,0,0,0-1.288.49,1.912,1.912,0,0,0-.462,1.386V21H81.34V13.244H83.3v.938a2.622,2.622,0,0,1,.966-.77,3.082,3.082,0,0,1,1.316-.28,3.319,3.319,0,0,1,1.624.392,2.654,2.654,0,0,1,1.106,1.092A2.82,2.82,0,0,1,89.4,13.538,3.167,3.167,0,0,1,90.972,13.132Zm12.248,3.822a4.663,4.663,0,0,1-.056.756h-5.67a1.929,1.929,0,0,0,.588,1.316,1.813,1.813,0,0,0,1.274.476,1.6,1.6,0,0,0,1.554-.938h2.114a3.567,3.567,0,0,1-1.288,1.848,3.786,3.786,0,0,1-2.338.714,4.132,4.132,0,0,1-2.016-.49A3.606,3.606,0,0,1,96,19.222a4.362,4.362,0,0,1-.49-2.1A4.392,4.392,0,0,1,96,15.008a3.419,3.419,0,0,1,1.372-1.4,4.11,4.11,0,0,1,2.03-.49,4.04,4.04,0,0,1,1.974.476,3.282,3.282,0,0,1,1.358,1.358A4,4,0,0,1,103.22,16.954Zm-2.03-.56a1.531,1.531,0,0,0-.546-1.2,1.917,1.917,0,0,0-1.3-.462,1.788,1.788,0,0,0-1.232.448,1.926,1.926,0,0,0-.6,1.218Zm7.759-3.262a2.978,2.978,0,0,1,2.24.882,3.327,3.327,0,0,1,.854,2.436V21h-1.96V16.716a1.985,1.985,0,0,0-.462-1.414,1.625,1.625,0,0,0-1.26-.5,1.686,1.686,0,0,0-1.288.5,1.985,1.985,0,0,0-.462,1.414V21h-1.96V13.244h1.96v.966a2.65,2.65,0,0,1,.994-.784A3.075,3.075,0,0,1,108.949,13.132Z' transform='translate(-112.043 -52.126)'/>\n");

            //subtitles y-axis
            for (int i = 5; i != -1; --i) {
                svgWriter.write("                <line id='line_" + subtitlesLeft.get(i) + "' x2='10' transform='translate(5 " + (140 * (5 - i)) + ")' fill='none' stroke='#000' stroke-width='10'/>\n");
                svgWriter.write("                <text id='left_subtitle_" + subtitlesLeft.get(i) + "' text-anchor='end' transform='translate(0 " + (7 + 140 * (5 - i)) + ")' font-size='20' font-family='SegoeUI-Bold, Segoe UI' font-weight='700'><tspan x='0' y='0'>" + subtitlesLeft.get(i) + "%</tspan></text>\n");
            }

            svgWriter.write("            </g>\n");

            // bars
            svgWriter.write("            <g id='scaledBars' transform='translate(" + (136 + (barWidth / 2)) + " 888)' stroke='#c2185b' stroke-width='" + (barWidth - 1) + "' >\n");
            for (int i = 0; i != scaledBars.size(); ++i) {
                if (scaledBars.get(i) > (100.0 / scale)) {
                    svgWriter.write("                <line id='bar" + (i + 1) + "' y1='" + (graphHeight + 10) + "' transform='translate(" + (i * barWidth) + ") rotate(180)' fill='none'>\n");
                } else {
                    svgWriter.write("                <line id='bar" + (i + 1) + "' y1='" + (scaledBars.get(i) * (graphHeight / 100) * scale) + "' transform='translate(" + (i * barWidth) + ") rotate(180)' fill='none'>\n");
                }
                svgWriter.write("                    <title>" + (scaledBars.get(i)) + "</title>\n");
                svgWriter.write("                </line>\n");
            }
            svgWriter.write("            </g>\n");
            //if a column is too tall, it will be cut off at the top
            svgWriter.write("            <g id='bar_end' transform='translate(151 885)'>\n");
            svgWriter.write("                <rect id='Rechteck_25' data-name='Rechteck 25' width='1500' height='10' transform='translate(-15 -707)' fill='url(#linear-gradient)'/>\n");
            svgWriter.write("            </g>\n");
            svgWriter.write("        </g>\n");

            //info: diagnostic finding
            svgWriter.write("        <g id='info'>\n");
            svgWriter.write("            <g id='Befund' transform='translate(35 432.5)'>\n");
            if (result.getAnalysisResult() == NEGATIVE) {
                //diagnostic finding: negative
                svgWriter.write("                <g id='negativ' transform='translate(0 32)'>\n");
                svgWriter.write("                    <path id='Pfad_22' data-name='Pfad 22' d='M36.294,11.72A4,4,0,0,1,39.414,13a4.89,4.89,0,0,1,1.18,3.48V23h-3.4V16.94a2.449,2.449,0,0,0-.58-1.74,2.273,2.273,0,0,0-3.12,0,2.449,2.449,0,0,0-.58,1.74V23h-3.42V11.84h3.42v1.48a3.53,3.53,0,0,1,1.4-1.16A4.367,4.367,0,0,1,36.294,11.72Zm17.2,5.52a8.731,8.731,0,0,1-.06,1H45.69a2.39,2.39,0,0,0,.66,1.6,2.1,2.1,0,0,0,1.46.54,1.8,1.8,0,0,0,1.78-1.08h3.64a5.1,5.1,0,0,1-2.84,3.36,5.879,5.879,0,0,1-2.46.5,5.985,5.985,0,0,1-2.92-.7,4.979,4.979,0,0,1-2-2,6.175,6.175,0,0,1-.72-3.04,6.317,6.317,0,0,1,.7-3.04,4.979,4.979,0,0,1,2-2,6.482,6.482,0,0,1,5.82-.02,4.818,4.818,0,0,1,1.96,1.94A5.823,5.823,0,0,1,53.491,17.24Zm-3.5-.9a1.758,1.758,0,0,0-.6-1.4,2.4,2.4,0,0,0-2.96-.02,2.243,2.243,0,0,0-.72,1.42Zm9.544-4.66a4.236,4.236,0,0,1,2.06.48,3.52,3.52,0,0,1,1.38,1.26V11.84h3.42V22.98a6.13,6.13,0,0,1-.62,2.78,4.558,4.558,0,0,1-1.86,2,5.962,5.962,0,0,1-3.1.74,6.429,6.429,0,0,1-4.02-1.18,4.383,4.383,0,0,1-1.76-3.16h3.38a1.582,1.582,0,0,0,.76,1,2.714,2.714,0,0,0,1.48.38,2.27,2.27,0,0,0,1.68-.62,2.556,2.556,0,0,0,.64-1.94V21.4a3.875,3.875,0,0,1-1.38,1.28,4.236,4.236,0,0,1-2.06.48,4.621,4.621,0,0,1-2.5-.7,5.062,5.062,0,0,1-1.78-2.02,6.886,6.886,0,0,1-.64-3.04,6.757,6.757,0,0,1,.64-3.02,4.916,4.916,0,0,1,1.78-2A4.621,4.621,0,0,1,59.535,11.68Zm3.44,5.74a2.773,2.773,0,0,0-.72-2.02,2.275,2.275,0,0,0-1.72-.74,2.339,2.339,0,0,0-1.74.74,2.748,2.748,0,0,0-.7,2,2.893,2.893,0,0,0,.7,2.04,2.339,2.339,0,0,0,1.74.74,2.275,2.275,0,0,0,1.72-.74A2.773,2.773,0,0,0,62.975,17.42Zm5.214-.02a6.757,6.757,0,0,1,.64-3.02,4.916,4.916,0,0,1,1.78-2,4.621,4.621,0,0,1,2.5-.7,4.236,4.236,0,0,1,2.06.48,3.52,3.52,0,0,1,1.38,1.26V11.84h3.42V23h-3.42V21.42a3.675,3.675,0,0,1-1.4,1.26,4.236,4.236,0,0,1-2.06.48,4.585,4.585,0,0,1-2.48-.7,5.062,5.062,0,0,1-1.78-2.02A6.886,6.886,0,0,1,68.189,17.4Zm8.36.02a2.773,2.773,0,0,0-.72-2.02,2.275,2.275,0,0,0-1.72-.74,2.339,2.339,0,0,0-1.74.74,2.748,2.748,0,0,0-.7,2,2.893,2.893,0,0,0,.7,2.04,2.339,2.339,0,0,0,1.74.74,2.275,2.275,0,0,0,1.72-.74A2.773,2.773,0,0,0,76.549,17.42ZM88.663,20.1V23h-1.74a4.291,4.291,0,0,1-2.9-.9,3.794,3.794,0,0,1-1.04-2.98V14.68h-1.36V11.84h1.36V9.12H86.4v2.72h2.24v2.84H86.4v4.48a.937.937,0,0,0,.24.72,1.171,1.171,0,0,0,.8.22Zm3.625-9.42a2.133,2.133,0,0,1-1.48-.52,1.764,1.764,0,0,1-.56-1.32,1.723,1.723,0,0,1,.56-1.32,2.086,2.086,0,0,1,1.48-.54,1.989,1.989,0,0,1,1.44.54,1.7,1.7,0,0,1,.58,1.32,1.735,1.735,0,0,1-.58,1.32A2.032,2.032,0,0,1,92.288,10.68Zm1.7,1.16V23h-3.42V11.84Zm7.5,7.96,2.42-7.96h3.64L103.587,23h-4.22l-3.96-11.16h3.66Z' fill='red'/>\n");
                svgWriter.write("                </g>\n");
            } else if (result.getAnalysisResult() == POSITIVE) {
                //diagnostic finding: positive
                svgWriter.write("                <g id='positiv' transform='translate(0 32)'>\n");
                svgWriter.write("                    <path id='Pfad_26' data-name='Pfad 26' d='M36.686,13.42V11.84h-3.4V28.32h3.4V21.44A3.979,3.979,0,0,0,40.1,23.16c2.721,0,4.887-2.24,4.887-5.76s-2.165-5.72-4.887-5.72A3.9,3.9,0,0,0,36.686,13.42Zm4.847,3.98a2.454,2.454,0,1,1-4.867.02,2.452,2.452,0,1,1,4.867-.02Zm16.085.02a5.486,5.486,0,0,0-5.761-5.74A5.5,5.5,0,0,0,46.1,17.42a5.455,5.455,0,0,0,5.721,5.74A5.518,5.518,0,0,0,57.617,17.42Zm-8.065,0c0-1.9,1.073-2.78,2.3-2.78,1.192,0,2.3.88,2.3,2.78,0,1.88-1.132,2.78-2.344,2.78C50.585,20.2,49.552,19.3,49.552,17.42Zm18.866,2.34c-.06-4.16-6.059-2.9-6.059-4.68,0-.54.437-.86,1.232-.86a1.463,1.463,0,0,1,1.629,1.26h3.139c-.219-2.2-1.808-3.8-4.668-3.8-2.9,0-4.509,1.56-4.509,3.46,0,4.1,6.039,2.8,6.039,4.6,0,.5-.457.9-1.331.9a1.558,1.558,0,0,1-1.708-1.3H58.823c.159,2.16,2.145,3.82,5.105,3.82C66.71,23.16,68.418,21.7,68.418,19.76ZM70.5,23h3.4V11.84H70.5ZM72.2,10.68a1.858,1.858,0,1,0-2.026-1.84A1.875,1.875,0,0,0,72.2,10.68Zm4.686,8.44c0,2.9,1.609,3.88,3.913,3.88h1.728V20.1H81.321c-.755,0-1.033-.28-1.033-.94V14.68h2.225V11.84H80.288V9.12h-3.4v2.72H75.54v2.84h1.351ZM84.425,23h3.4V11.84h-3.4Zm1.708-12.32a1.858,1.858,0,1,0-2.026-1.84A1.875,1.875,0,0,0,86.133,10.68Zm3.1,1.16L93.164,23h4.191l3.934-11.16H97.673l-2.4,7.96-2.4-7.96Z' fill='lime'/>\n");
                svgWriter.write("                </g>\n");
            } else if (result.getAnalysisResult() == UNKNOWN) {
                //diagnostic finding: -
                svgWriter.write("                <g id='-' data-name='-' transform='translate(-1 32)'>\n");
                svgWriter.write("                    <path id='Pfad_21' data-name='Pfad 21' d='M72.039,14.56V17.4h-8.8V14.56Z' fill='#000'/>\n");
                svgWriter.write("                </g>\n");
            }

            //diagnostic finding: logo
            svgWriter.write("                <g id='Befund-2' data-name='Befund'>\n");
            svgWriter.write("                    <path id='Pfad_17' data-name='Pfad 17' d='M38.628,15.84a3.137,3.137,0,0,1,1.94,1.18,3.446,3.446,0,0,1,.76,2.2,3.546,3.546,0,0,1-.56,1.98,3.621,3.621,0,0,1-1.58,1.32,5.825,5.825,0,0,1-2.46.48h-6.02V9.04h5.76a5.9,5.9,0,0,1,2.44.46,3.417,3.417,0,0,1,1.56,1.28,3.306,3.306,0,0,1,.54,1.86,3.149,3.149,0,0,1-.66,2.04A3.42,3.42,0,0,1,38.628,15.84Zm-5.12-1.04h2.56a2.381,2.381,0,0,0,1.54-.44,1.614,1.614,0,0,0,.54-1.3,1.614,1.614,0,0,0-.54-1.3,2.308,2.308,0,0,0-1.54-.46h-2.56Zm2.82,5.92a2.355,2.355,0,0,0,1.58-.48,1.666,1.666,0,0,0,.58-1.36,1.722,1.722,0,0,0-.6-1.4,2.388,2.388,0,0,0-1.62-.52h-2.76v3.76Zm17.532-3.5a6.612,6.612,0,0,1-.08,1.08h-8.1a2.755,2.755,0,0,0,.84,1.88,2.59,2.59,0,0,0,1.82.68,2.286,2.286,0,0,0,2.22-1.34h3.02a5.1,5.1,0,0,1-1.84,2.64,5.408,5.408,0,0,1-3.34,1.02,5.9,5.9,0,0,1-2.88-.7,5.152,5.152,0,0,1-1.98-2.02,6.23,6.23,0,0,1-.7-3,6.273,6.273,0,0,1,.7-3.02,4.884,4.884,0,0,1,1.96-2,5.871,5.871,0,0,1,2.9-.7,5.768,5.768,0,0,1,2.82.68,4.691,4.691,0,0,1,1.94,1.94A5.717,5.717,0,0,1,53.86,17.22Zm-2.9-.8a2.19,2.19,0,0,0-.78-1.72,2.738,2.738,0,0,0-1.86-.66,2.555,2.555,0,0,0-1.76.64,2.75,2.75,0,0,0-.86,1.74Zm10.024-2.2h-1.94V23H56.2V14.22h-1.26v-2.3H56.2v-.56a3.673,3.673,0,0,1,1.16-3,5.183,5.183,0,0,1,3.5-.9V9.82a2.078,2.078,0,0,0-1.42.34,1.7,1.7,0,0,0-.4,1.3v.46h1.94Zm12.275-2.3V23h-2.82V21.6a3.766,3.766,0,0,1-1.42,1.14,4.4,4.4,0,0,1-1.88.4,4.764,4.764,0,0,1-2.3-.54,4.02,4.02,0,0,1-1.58-1.62,5.492,5.492,0,0,1-.56-2.56v-6.5h2.8v6.1a2.911,2.911,0,0,0,.66,2.04,2.355,2.355,0,0,0,1.8.7,2.38,2.38,0,0,0,1.82-.7,2.911,2.911,0,0,0,.66-2.04v-6.1Zm8.9-.16a4.253,4.253,0,0,1,3.2,1.26,4.75,4.75,0,0,1,1.22,3.48V23h-2.8V16.88a2.836,2.836,0,0,0-.66-2.02,2.321,2.321,0,0,0-1.8-.72,2.41,2.41,0,0,0-1.84.72,2.836,2.836,0,0,0-.66,2.02V23h-2.8V11.92h2.8V13.3a3.8,3.8,0,0,1,1.42-1.12A4.4,4.4,0,0,1,82.161,11.76Zm6.363,5.66a6.493,6.493,0,0,1,.66-2.98,4.954,4.954,0,0,1,1.84-2,4.9,4.9,0,0,1,2.58-.7,4.625,4.625,0,0,1,2.06.48,4.036,4.036,0,0,1,1.56,1.24V8.2h2.84V23h-2.84V21.36a3.8,3.8,0,0,1-1.46,1.32,4.574,4.574,0,0,1-2.18.5,4.759,4.759,0,0,1-2.56-.72,5.1,5.1,0,0,1-1.84-2.02A6.664,6.664,0,0,1,88.523,17.42Zm8.72.04a3.534,3.534,0,0,0-.4-1.74,2.737,2.737,0,0,0-1.08-1.12,2.891,2.891,0,0,0-2.9-.02,2.914,2.914,0,0,0-1.08,1.12,3.489,3.489,0,0,0-.4,1.72,3.724,3.724,0,0,0,.4,1.76,3.071,3.071,0,0,0,1.08,1.14,2.8,2.8,0,0,0,1.44.4,2.946,2.946,0,0,0,1.46-.38,2.91,2.91,0,0,0,1.08-1.12A3.651,3.651,0,0,0,97.243,17.46Zm6.795,5.68a1.788,1.788,0,0,1-1.26-.46,1.6,1.6,0,0,1-.48-1.18,1.539,1.539,0,0,1,.48-1.16,1.745,1.745,0,0,1,1.26-.48,1.653,1.653,0,0,1,1.22.48,1.539,1.539,0,0,1,.48,1.16,1.6,1.6,0,0,1-.48,1.18A1.692,1.692,0,0,1,104.038,23.14Zm0-8.28a1.788,1.788,0,0,1-1.26-.46,1.6,1.6,0,0,1-.48-1.18,1.539,1.539,0,0,1,.48-1.16,1.745,1.745,0,0,1,1.26-.48,1.653,1.653,0,0,1,1.22.48,1.539,1.539,0,0,1,.48,1.16,1.6,1.6,0,0,1-.48,1.18A1.692,1.692,0,0,1,104.038,14.86Z'/>\n");
            svgWriter.write("                </g>\n");
            svgWriter.write("            </g>\n");

            //filename
            svgWriter.write("            <g id='Name' transform='translate(39 171)'>\n");
            svgWriter.write("                <g id='namefield'>\n");
            svgWriter.write("                    <rect id='Rechteck_26' data-name='Rechteck 26' width='67' height='17' transform='translate(377 -138)' fill='#fff'><title>" + cutFileExtension(path.getFileName()) + "</title></rect>\n");
            svgWriter.write("                    <path id='Pfad_19' data-name='Pfad 19' d='M47.412,23h-2.8l-6.34-9.58V23h-2.8V9.02h2.8l6.34,9.6V9.02h2.8Zm2.047-5.58a6.493,6.493,0,0,1,.66-2.98,5,5,0,0,1,1.82-2,4.9,4.9,0,0,1,2.58-.7,4.456,4.456,0,0,1,2.16.5,4.376,4.376,0,0,1,1.5,1.26V11.92H61V23h-2.82V21.38a4.231,4.231,0,0,1-1.5,1.3,4.574,4.574,0,0,1-2.18.5,4.759,4.759,0,0,1-2.56-.72,5.153,5.153,0,0,1-1.82-2.02A6.664,6.664,0,0,1,49.459,17.42Zm8.72.04a3.533,3.533,0,0,0-.4-1.74A2.736,2.736,0,0,0,56.7,14.6a2.891,2.891,0,0,0-2.9-.02,2.914,2.914,0,0,0-1.08,1.12,3.49,3.49,0,0,0-.4,1.72,3.725,3.725,0,0,0,.4,1.76,3.071,3.071,0,0,0,1.08,1.14,2.8,2.8,0,0,0,1.44.4,2.946,2.946,0,0,0,1.46-.38,2.909,2.909,0,0,0,1.08-1.12A3.65,3.65,0,0,0,58.179,17.46Zm19.315-5.7a4.4,4.4,0,0,1,3.28,1.26,4.662,4.662,0,0,1,1.26,3.48V23h-2.8V16.88a2.731,2.731,0,0,0-.66-1.98,2.355,2.355,0,0,0-1.8-.7,2.421,2.421,0,0,0-1.82.7,2.731,2.731,0,0,0-.66,1.98V23h-2.8V16.88a2.731,2.731,0,0,0-.66-1.98,2.355,2.355,0,0,0-1.8-.7,2.447,2.447,0,0,0-1.84.7,2.731,2.731,0,0,0-.66,1.98V23h-2.8V11.92h2.8v1.34a3.746,3.746,0,0,1,1.38-1.1,4.4,4.4,0,0,1,1.88-.4,4.741,4.741,0,0,1,2.32.56,3.791,3.791,0,0,1,1.58,1.56,4.029,4.029,0,0,1,1.56-1.54A4.525,4.525,0,0,1,77.493,11.76Zm17.5,5.46a6.6,6.6,0,0,1-.08,1.08h-8.1a2.755,2.755,0,0,0,.84,1.88,2.59,2.59,0,0,0,1.82.68,2.286,2.286,0,0,0,2.22-1.34h3.02a5.1,5.1,0,0,1-1.84,2.64,5.408,5.408,0,0,1-3.34,1.02,5.9,5.9,0,0,1-2.88-.7,5.152,5.152,0,0,1-1.98-2.02,6.231,6.231,0,0,1-.7-3,6.274,6.274,0,0,1,.7-3.02,4.884,4.884,0,0,1,1.96-2,5.871,5.871,0,0,1,2.9-.7,5.768,5.768,0,0,1,2.82.68,4.691,4.691,0,0,1,1.94,1.94A5.717,5.717,0,0,1,94.991,17.22Zm-2.9-.8a2.19,2.19,0,0,0-.78-1.72,2.737,2.737,0,0,0-1.86-.66,2.555,2.555,0,0,0-1.76.64,2.751,2.751,0,0,0-.86,1.74Zm6.184,6.72a1.789,1.789,0,0,1-1.26-.46,1.6,1.6,0,0,1-.48-1.18,1.539,1.539,0,0,1,.48-1.16,1.746,1.746,0,0,1,1.26-.48,1.653,1.653,0,0,1,1.22.48,1.539,1.539,0,0,1,.48,1.16,1.6,1.6,0,0,1-.48,1.18A1.692,1.692,0,0,1,98.274,23.14Zm0-8.28a1.789,1.789,0,0,1-1.26-.46,1.6,1.6,0,0,1-.48-1.18,1.539,1.539,0,0,1,.48-1.16,1.746,1.746,0,0,1,1.26-.48,1.653,1.653,0,0,1,1.22.48,1.539,1.539,0,0,1,.48,1.16,1.6,1.6,0,0,1-.48,1.18A1.692,1.692,0,0,1,98.274,14.86Z' transform='translate(343 -145.18)'><title>" + cutFileExtension(path.getFileName()) + "</title></path>\n");
            svgWriter.write("                </g>\n");
            svgWriter.write("                <text id='dataname' data-name='" + cutFileExtension(path.getFileName()) + "' transform='translate(451 -122)' fill='#1d1d1d' font-size='20' font-family='SegoeUI-Bold, Segoe UI' font-weight='700'><tspan x='0' y='0'>" + cutFileExtension(path.getFileName()) + "</tspan></text>\n");
            svgWriter.write("            </g>\n");

            //date
            svgWriter.write("            <g id='Datum' transform='translate(35 91)'>\n");
            svgWriter.write("                <path id='Pfad_18' data-name='Pfad 18' d='M36.721,9.04a8.277,8.277,0,0,1,3.86.86,6.051,6.051,0,0,1,2.58,2.46,7.18,7.18,0,0,1,.92,3.68,7.18,7.18,0,0,1-.92,3.68,6.121,6.121,0,0,1-2.58,2.42,8.277,8.277,0,0,1-3.86.86h-4.88V9.04Zm-.1,11.58a4.6,4.6,0,0,0,3.4-1.2,4.57,4.57,0,0,0,1.2-3.38,4.64,4.64,0,0,0-1.2-3.4,4.512,4.512,0,0,0-3.4-1.24h-1.98v9.22Zm8.836-3.2a6.493,6.493,0,0,1,.66-2.98,5,5,0,0,1,1.82-2,4.9,4.9,0,0,1,2.58-.7,4.457,4.457,0,0,1,2.16.5,4.378,4.378,0,0,1,1.5,1.26V11.92H57V23h-2.82V21.38a4.231,4.231,0,0,1-1.5,1.3,4.574,4.574,0,0,1-2.18.5,4.759,4.759,0,0,1-2.56-.72,5.152,5.152,0,0,1-1.82-2.02A6.664,6.664,0,0,1,45.457,17.42Zm8.72.04a3.534,3.534,0,0,0-.4-1.74A2.737,2.737,0,0,0,52.7,14.6a2.891,2.891,0,0,0-2.9-.02,2.914,2.914,0,0,0-1.08,1.12,3.489,3.489,0,0,0-.4,1.72,3.724,3.724,0,0,0,.4,1.76,3.071,3.071,0,0,0,1.08,1.14,2.8,2.8,0,0,0,1.44.4,2.946,2.946,0,0,0,1.46-.38,2.91,2.91,0,0,0,1.08-1.12A3.651,3.651,0,0,0,54.177,17.46Zm8.815-3.24v5.36a1.12,1.12,0,0,0,.26.82,1.409,1.409,0,0,0,.92.24h1.3V23h-1.76q-3.54,0-3.54-3.44V14.22h-1.32v-2.3h1.32V9.18h2.82v2.74h2.48v2.3Zm14.954-2.3V23h-2.82V21.6a3.766,3.766,0,0,1-1.42,1.14,4.4,4.4,0,0,1-1.88.4,4.764,4.764,0,0,1-2.3-.54,4.02,4.02,0,0,1-1.58-1.62,5.492,5.492,0,0,1-.56-2.56v-6.5h2.8v6.1a2.911,2.911,0,0,0,.66,2.04,2.355,2.355,0,0,0,1.8.7,2.38,2.38,0,0,0,1.82-.7,2.911,2.911,0,0,0,.66-2.04v-6.1Zm16.523-.16a4.4,4.4,0,0,1,3.28,1.26,4.662,4.662,0,0,1,1.26,3.48V23h-2.8V16.88a2.731,2.731,0,0,0-.66-1.98,2.355,2.355,0,0,0-1.8-.7,2.421,2.421,0,0,0-1.82.7,2.731,2.731,0,0,0-.66,1.98V23h-2.8V16.88a2.731,2.731,0,0,0-.66-1.98,2.355,2.355,0,0,0-1.8-.7,2.447,2.447,0,0,0-1.84.7,2.731,2.731,0,0,0-.66,1.98V23h-2.8V11.92h2.8v1.34a3.746,3.746,0,0,1,1.38-1.1,4.4,4.4,0,0,1,1.88-.4,4.741,4.741,0,0,1,2.32.56,3.791,3.791,0,0,1,1.58,1.56,4.029,4.029,0,0,1,1.56-1.54A4.525,4.525,0,0,1,94.468,11.76ZM102.9,23.14a1.788,1.788,0,0,1-1.26-.46,1.6,1.6,0,0,1-.48-1.18,1.539,1.539,0,0,1,.48-1.16,1.745,1.745,0,0,1,1.26-.48,1.653,1.653,0,0,1,1.22.48,1.539,1.539,0,0,1,.48,1.16,1.6,1.6,0,0,1-.48,1.18A1.692,1.692,0,0,1,102.9,23.14Zm0-8.28a1.788,1.788,0,0,1-1.26-.46,1.6,1.6,0,0,1-.48-1.18,1.539,1.539,0,0,1,.48-1.16,1.745,1.745,0,0,1,1.26-.48,1.653,1.653,0,0,1,1.22.48,1.539,1.539,0,0,1,.48,1.16,1.6,1.6,0,0,1-.48,1.18A1.692,1.692,0,0,1,102.9,14.86Z'/> \n");
            svgWriter.write("                <text id='" + LocalDate.now() + "' data-name='" + LocalDate.now() + "' transform='translate(68 54)' fill='#1d1d1d' text-anchor='middle' font-size='20' font-family='SegoeUI-Bold, Segoe UI' font-weight='700'><tspan x='0' y='0'>" + LocalDate.now() + "</tspan></text>\n");
            svgWriter.write("            </g>\n");

            //info box & end of dokument
            svgWriter.write("""
                                <g id="MetaG">
                                    <g id="MetaG_Logo_Black_White" transform="translate(0 0.248)">
                                        <rect id="Rechteck_15" data-name="Rechteck 15" width="206" height="82" transform="translate(0 -0.248)"/>
                                        <path id="Pfad_7" data-name="Pfad 7" d="M61.292,28.589V66.842H53.62V41.961L43.371,66.842H37.562l-10.3-24.881V66.842H19.587V28.589H28.3L40.467,57.032,52.633,28.589ZM97.1,51a18.106,18.106,0,0,1-.219,2.959h-22.2a7.548,7.548,0,0,0,2.3,5.151,7.1,7.1,0,0,0,4.987,1.863,6.265,6.265,0,0,0,6.083-3.672h8.275a13.97,13.97,0,0,1-5.042,7.234,14.819,14.819,0,0,1-9.152,2.795,16.174,16.174,0,0,1-7.892-1.918,14.117,14.117,0,0,1-5.426-5.535,17.071,17.071,0,0,1-1.918-8.22,17.19,17.19,0,0,1,1.918-8.275,13.384,13.384,0,0,1,5.371-5.48,16.09,16.09,0,0,1,7.947-1.918,15.8,15.8,0,0,1,7.727,1.863,12.854,12.854,0,0,1,5.316,5.316A15.667,15.667,0,0,1,97.1,51Zm-7.946-2.192A6,6,0,0,0,87.018,44.1a7.5,7.5,0,0,0-5.1-1.809A7,7,0,0,0,77.1,44.044a7.536,7.536,0,0,0-2.357,4.768Zm22.479-6.028V57.471a3.071,3.071,0,0,0,.712,2.247,3.861,3.861,0,0,0,2.521.658h3.562v6.467h-4.823q-9.7,0-9.7-9.426V42.783H100.29v-6.3h3.617V28.973h7.727v7.508h6.8v6.3Zm10.341,8.769a17.792,17.792,0,0,1,1.809-8.166,13.712,13.712,0,0,1,4.987-5.48,13.419,13.419,0,0,1,7.07-1.918,12.21,12.21,0,0,1,5.919,1.37,12,12,0,0,1,4.11,3.453V36.481H153.6V66.842H145.87V62.4a11.594,11.594,0,0,1-4.11,3.562,12.532,12.532,0,0,1-5.974,1.37,13.04,13.04,0,0,1-7.015-1.973,14.118,14.118,0,0,1-4.987-5.535A18.26,18.26,0,0,1,121.975,51.552Zm23.894.11a9.682,9.682,0,0,0-1.1-4.768,7.5,7.5,0,0,0-2.959-3.069,7.922,7.922,0,0,0-7.946-.055,7.986,7.986,0,0,0-2.959,3.069,9.562,9.562,0,0,0-1.1,4.713,10.205,10.205,0,0,0,1.1,4.823,8.414,8.414,0,0,0,2.959,3.124,7.661,7.661,0,0,0,3.946,1.1,8.07,8.07,0,0,0,4-1.041,7.972,7.972,0,0,0,2.959-3.069A10,10,0,0,0,145.87,51.661ZM187.725,40.1a8.982,8.982,0,0,0-3.617-3.672,11.007,11.007,0,0,0-5.371-1.26,11.742,11.742,0,0,0-6.028,1.534,10.6,10.6,0,0,0-4.11,4.384,14.07,14.07,0,0,0-1.48,6.576,14.319,14.319,0,0,0,1.48,6.686,10.849,10.849,0,0,0,4.22,4.384,12.373,12.373,0,0,0,6.248,1.534,10.922,10.922,0,0,0,7.179-2.3,11.247,11.247,0,0,0,3.672-6.522H176.764V45.578H197.48v6.686a17.971,17.971,0,0,1-3.288,7.4,18.762,18.762,0,0,1-6.522,5.48,19.139,19.139,0,0,1-8.878,2.028A20.5,20.5,0,0,1,168.763,64.7a18.594,18.594,0,0,1-7.015-6.96,20.057,20.057,0,0,1-2.521-10.084,20.057,20.057,0,0,1,2.521-10.084,18.087,18.087,0,0,1,7.015-6.96,20.034,20.034,0,0,1,9.974-2.521,19.778,19.778,0,0,1,11.235,3.179,15.964,15.964,0,0,1,6.576,8.823Z" transform="translate(-4.678 -6.671)" fill="#fff"/>
                                    </g>
                                    <g id="MetaG_2022.1_Text" transform="translate(35 828)">
                                        <path id="Pfad_25" data-name="Pfad 25" d="M49.561,16.94a11.643,11.643,0,0,0,1.54-1.764,2.475,2.475,0,0,0,.448-1.358,1.221,1.221,0,0,0-1.372-1.33,1.282,1.282,0,0,0-1.05.462,2.18,2.18,0,0,0-.392,1.3h-1.9a3.829,3.829,0,0,1,.462-1.9A2.823,2.823,0,0,1,48.511,11.2a3.855,3.855,0,0,1,1.722-.378,3.944,3.944,0,0,1,1.806.378,2.585,2.585,0,0,1,1.134,1.05,2.981,2.981,0,0,1,.378,1.512,3.575,3.575,0,0,1-.532,1.848,11.257,11.257,0,0,1-1.848,2.2l-1.582,1.568h4.172V21H46.845V19.572ZM55.2,15.764a7.07,7.07,0,0,1,.868-3.794A3.2,3.2,0,0,1,58.979,10.6a3.163,3.163,0,0,1,2.9,1.372,6.979,6.979,0,0,1,.882,3.794,7.084,7.084,0,0,1-.882,3.822,3.152,3.152,0,0,1-2.9,1.386,3.187,3.187,0,0,1-2.912-1.386A7.177,7.177,0,0,1,55.2,15.764Zm5.628,0a9.043,9.043,0,0,0-.14-1.736,2.276,2.276,0,0,0-.532-1.162,1.479,1.479,0,0,0-1.176-.448,1.524,1.524,0,0,0-1.19.448,2.44,2.44,0,0,0-.532,1.162,10.03,10.03,0,0,0-.126,1.736,10.741,10.741,0,0,0,.126,1.792,2.277,2.277,0,0,0,.532,1.162,1.848,1.848,0,0,0,2.38,0,2.276,2.276,0,0,0,.532-1.162A10.741,10.741,0,0,0,60.827,15.764Zm6.111,1.176a11.637,11.637,0,0,0,1.54-1.764,2.474,2.474,0,0,0,.448-1.358,1.221,1.221,0,0,0-1.372-1.33,1.282,1.282,0,0,0-1.05.462,2.181,2.181,0,0,0-.392,1.3h-1.9a3.829,3.829,0,0,1,.462-1.9A2.823,2.823,0,0,1,65.888,11.2a3.855,3.855,0,0,1,1.722-.378,3.944,3.944,0,0,1,1.806.378,2.585,2.585,0,0,1,1.134,1.05,2.981,2.981,0,0,1,.378,1.512A3.574,3.574,0,0,1,70.4,15.61a11.25,11.25,0,0,1-1.848,2.2l-1.582,1.568h4.172V21H64.222V19.572Zm8.326,0a11.637,11.637,0,0,0,1.54-1.764,2.474,2.474,0,0,0,.448-1.358,1.221,1.221,0,0,0-1.372-1.33,1.282,1.282,0,0,0-1.05.462,2.181,2.181,0,0,0-.392,1.3h-1.9a3.829,3.829,0,0,1,.462-1.9A2.823,2.823,0,0,1,74.214,11.2a3.855,3.855,0,0,1,1.722-.378,3.944,3.944,0,0,1,1.806.378,2.585,2.585,0,0,1,1.134,1.05,2.981,2.981,0,0,1,.378,1.512,3.574,3.574,0,0,1-.532,1.848,11.25,11.25,0,0,1-1.848,2.2l-1.582,1.568h4.172V21H72.548V19.572Zm6.73,4.158a1.252,1.252,0,0,1-.882-.322,1.123,1.123,0,0,1-.336-.826,1.077,1.077,0,0,1,.336-.812,1.222,1.222,0,0,1,.882-.336,1.157,1.157,0,0,1,.854.336,1.077,1.077,0,0,1,.336.812,1.123,1.123,0,0,1-.336.826A1.184,1.184,0,0,1,81.994,21.1ZM84.3,12.6V10.794h3.374V21H85.659V12.6Z"/>
                                    </g>
                                    <g id="MetaG_Icon" transform="translate(67 742)">
                                        <g id="background" transform="translate(0 13)">
                                            <g transform="matrix(1, 0, 0, 1, -67, -755)" filter="url(#Pfad_9)">
                                                <path id="Pfad_9-2" data-name="Pfad 9" d="M12,0H60A12,12,0,0,1,72,12V60A12,12,0,0,1,60,72H12A12,12,0,0,1,0,60V12A12,12,0,0,1,12,0Z" transform="translate(67 755)" fill="#c2185b"/>
                                            </g>
                                            <g transform="matrix(1, 0, 0, 1, -67, -755)" filter="url(#Pfad_4)">
                                                <path id="Pfad_4-2" data-name="Pfad 4" d="M12,0H60A12,12,0,0,1,72,12V59.632L0,44.8V12A12,12,0,0,1,12,0Z" transform="translate(67 755)" fill="#c2185b"/>
                                            </g>
                                            <g transform="matrix(1, 0, 0, 1, -67, -755)" filter="url(#Pfad_2)">
                                                <path id="Pfad_2-2" data-name="Pfad 2" d="M12,0H60A12,12,0,0,1,72,12V50.262L0,21.838V12A12,12,0,0,1,12,0Z" transform="translate(67 755)" fill="#c2185b"/>
                                            </g>
                                            <g transform="matrix(1, 0, 0, 1, -67, -755)" filter="url(#Pfad_3)">
                                                <path id="Pfad_3-2" data-name="Pfad 3" d="M12,0H60A12,12,0,0,1,72,12V29.148L0,55.821V12A12,12,0,0,1,12,0Z" transform="translate(67 755)" fill="#c2185b"/>
                                            </g>
                                            <g transform="matrix(1, 0, 0, 1, -67, -755)" filter="url(#Pfad_5)">
                                                <path id="Pfad_5-2" data-name="Pfad 5" d="M12,0H60A12,12,0,0,1,72,12V27.192L0,12H0A12,12,0,0,1,12,0Z" transform="translate(67 755)" fill="#c2185b"/>
                                            </g>
                                            <g id="Pfad_10" data-name="Pfad 10" fill="none">
                                                <path d="M12,0H60A12,12,0,0,1,72,12V60A12,12,0,0,1,60,72H12A12,12,0,0,1,0,60V12A12,12,0,0,1,12,0Z" stroke="none"/>
                                                <path d="M 12 0 C 5.372581481933594 0 0 5.372581481933594 0 12 L 0 60 C 0 66.62741851806641 5.372581481933594 72 12 72 L 60 72 C 66.62741851806641 72 72 66.62741851806641 72 60 L 72 12 C 72 5.372581481933594 66.62741851806641 0 60 0 L 12 0 M 12 -7 L 60 -7 C 70.47663116455078 -7 79 1.523368835449219 79 12 L 79 60 C 79 70.47663116455078 70.47663116455078 79 60 79 L 12 79 C 1.523368835449219 79 -7 70.47663116455078 -7 60 L -7 12 C -7 1.523368835449219 1.523368835449219 -7 12 -7 Z" stroke="none" fill="#fff"/>
                                            </g>
                                        </g>
                                        <g id="biotech_white_24dp" transform="translate(0 13)">
                                            <g id="Gruppe_7" data-name="Gruppe 7">
                                                <rect id="Rechteck_9" data-name="Rechteck 9" width="72" height="72" fill="none"/>
                                            </g>
                                            <g id="Gruppe_8" data-name="Gruppe 8" transform="translate(15 6)">
                                                <path id="Pfad_1" data-name="Pfad 1" d="M11,53a6.018,6.018,0,0,0-6,6H47a6.018,6.018,0,0,0-6-6H29V47h9a6.018,6.018,0,0,0,6-6H20a8.98,8.98,0,0,1-4.59-16.71,7.356,7.356,0,0,0,5.49,3.18,7.462,7.462,0,0,0,5.55-1.86l1.77,4.83,2.82-1.02,1.02,2.82L37.7,30.2l-1.02-2.82,2.82-1.02L31.28,3.8,28.46,4.82,27.44,2,21.8,4.04l1.02,2.82L20,7.91l1.68,4.65a7.451,7.451,0,0,0-7.44,5.58A15.006,15.006,0,0,0,20,47v6ZM28.58,9.56l5.13,14.1-2.82,1.02-5.13-14.1ZM21.5,17a3,3,0,1,1-3,3A3.009,3.009,0,0,1,21.5,17Z" transform="translate(-5 -2)" fill="#fff"/>
                                            </g>
                                        </g>
                                    </g>
                                    <rect id="Rechteck_16" data-name="Rechteck 16" width="5" height="818" transform="translate(201 82)"/>
                                </g>
                            </g>
                        </g>
                    </svg>""");
//            System.out.println("Successfully wrote to the svg file.");
        }
    }

}
